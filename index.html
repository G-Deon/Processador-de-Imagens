<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Processador de Imagens</title>
    <link rel="stylesheet" href="/style.css" />
    <script src="https://cdn.jsdelivr.net/npm/tiff.js@latest/tiff.min.js"></script>
    <script src="/script.js" defer></script>
  </head>
  <body class="is-light">
    <div class="container">
      <nav class="sidebar" id="sidebar">
        <div class="sidebar-header">
          <h2>Processador de Imagens</h2>
        </div>
        <a
          data-target="sec1"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Operações Aritméticas Básicas</a
        >
        <a
          data-target="sec2"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
        >
          Operações Geométricas e Simples
        </a>
        <a
          data-target="sec3"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Combinação e Diferenças</a
        >
        <a
          data-target="sec4"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Operações Lógicas e Binárias</a
        >
        <a
          data-target="sec5"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Processamento de Histograma</a
        >
        <a
          data-target="sec6"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Filtragem Espacial (Passa-Baixa)</a
        >
        <a
          data-target="sec7"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Filtragem Espacial (Passa-Alta)</a
        >
        <a
          data-target="sec8"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Operações Morfológicas</a
        >
        <a
          data-target="sec9"
          href="#"
          class="menu-item"
          data-active="false"
          onclick="setAtive(event)"
          >Informação do Pixel Clicado</a
        >
        <div class="controls-btn">
          <div class="control-btn">
            <button class="clearBtn" onclick="clearImg()">Limpar Tudo</button>
          </div>
          <div class="control-btn">
            <button class="saveBtn" onclick="saveImg()">
              Salvar Resultado
            </button>
          </div>
        </div>
      </nav>

      <main class="main-content">
        <div class="fixed-section">
          <div class="upload-section">
            <div class="images-display" id="imagesDisplay"></div>
            <div class="upload-container">
              <div class="upload-box">
                <input type="file" id="image1" accept="image/*" />
                <div class="upload-text">Selecionar Imagem 1</div>
              </div>
              <div class="upload-box">
                <input type="file" id="image2" accept="image/*" />
                <div class="upload-text">Selecionar Imagem 2</div>
              </div>
            </div>
          </div>
        </div>

        <section id="sec1" class="content-section" data-active="false">
          <div class="controls">
            <fieldset class="control-fieldset">
              <legend>Operações com Valor</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <label for="valueInput">Valor:</label>
                  <input
                    type="range"
                    id="valueInput"
                    min="0"
                    max="255"
                    value="128"
                  />
                  <input
                    type="number"
                    id="inputValue"
                    min="0"
                    max="255"
                    value="128"
                  />
                </div>
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="addValueToImage()">
                    Adicionar Valor
                  </button>
                  <button
                    class="btn-operation"
                    onclick="subtractValueFromImage()"
                  >
                    Subtrair Valor
                  </button>
                </div>
              </div>
            </fieldset>

            <fieldset class="control-fieldset">
              <legend>Multiplicação e Divisão</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <label for="valueSelector">Valor:</label>
                  <input
                    type="range"
                    id="valueSelectorRange"
                    min="0"
                    max="2"
                    value="0"
                    step="0.05"
                  />
                  <input
                    type="number"
                    id="valueSelectorValue"
                    min="0"
                    max="2"
                    value="0"
                    step="0.05"
                  />
                </div>
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="multiValueToImage()">
                    Multiplicar
                  </button>
                  <button class="btn-operation" onclick="dividerValueToImage()">
                    Dividir
                  </button>
                </div>
              </div>
            </fieldset>

            <fieldset class="control-fieldset">
              <legend>Operações entre Imagens</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="addImages()">
                    Somar Imagens
                  </button>
                  <button class="btn-operation" onclick="subtractImages()">
                    Subtrair Imagens
                  </button>
                </div>
              </div>
            </fieldset>
          </div>
        </section>

        <section id="sec2" class="content-section" data-active="false">
          <div class="controls">
            <fieldset class="control-fieldset">
              <legend>Transformações Básicas</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="grayTransform()">
                    Escala de Cinza
                  </button>
                  <button class="btn-operation" onclick="negativeTransform()">
                    Negativo
                  </button>
                </div>
              </div>
            </fieldset>

            <fieldset class="control-fieldset">
              <legend>Operações Geométricas</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="flipHorizontal()">
                    Inverter Horizontal
                  </button>
                  <button class="btn-operation" onclick="flipVertical()">
                    Inverter Vertical
                  </button>
                </div>
              </div>
            </fieldset>
          </div>
        </section>

        <section id="sec3" class="content-section" data-active="false">
          <div class="controls">

            <fieldset class="control-fieldset">
              <legend>Diferença entre Imagens</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="difference()">
                    Diferença
                  </button>
                </div>
              </div>
            </fieldset>

            <fieldset class="control-fieldset">
              <legend>Combinação Linear</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <label for="blendingValue">Valor (0-1):</label>
                  <input
                    type="range"
                    id="blendingRange"
                    min="0"
                    max="1"
                    value="0.5"
                    step="0.1"
                  />
                  <input
                    type="number"
                    id="blendingValue"
                    value="0.5"
                    min="0"
                    max="1"
                    step="0.1"
                  />
                </div>
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="blending()">
                    Blending
                  </button>
                  <button class="btn-operation" onclick="media()">Média</button>
                </div>
              </div>
            </fieldset>
          </div>
        </section>

        <section id="sec4" class="content-section" data-active="false">
          <div class="controls">
            <fieldset class="control-fieldset">
              <legend>Operações lógicas</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="andLogic()">
                    AND
                  </button>
                  <button class="btn-operation" onclick="orLogic()">OR</button>
                  <button class="btn-operation" onclick="notLogic()">
                    NOT
                  </button>
                  <button class="btn-operation" onclick="xorLogic()">
                    XOR
                  </button>
                </div>
              </div>
            </fieldset>

            <fieldset class="control-fieldset">
              <legend>Limiarização de imagens.</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <label for="binaryValue">Valor (0-255):</label>
                  <input
                    type="range"
                    id="binaryRange"
                    min="0"
                    max="255"
                    value="128"
                  />
                  <input
                    type="number"
                    id="binaryValue"
                    value="128"
                    min="0"
                    max="255"
                    step="1"
                  />
                </div>
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="binaryConvert()">
                    Converter para Binário
                  </button>
                </div>
              </div>
            </fieldset>
          </div>
        </section>

        <section id="sec5" class="content-section" data-active="false">
          <div class="controls">
            <fieldset class="control-fieldset">
              <legend>Antes</legend>
              <div class="fieldset-content"></div>
            </fieldset>
            <div class="control-group-inline">
              <button class="btn-operation" onclick="equalizeHistogram()">
                Equalizar
              </button>
            </div>
            <fieldset class="control-fieldset">
              <legend>Depois</legend>
              <div class="fieldset-content"></div>
            </fieldset>
          </div>
        </section>

        <section id="sec6" class="content-section" data-active="false">
          <div class="controls">
            <fieldset class="control-fieldset">
              <legend>Tamanho da Grade</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <select id="passaBaixaKernel">
                    <option value="3">3x3</option>
                    <option value="5">5x5</option>
                    <option value="7">7x7</option>
                    <option value="9">9x9</option>
                  </select>
                </div>
              </div>
            </fieldset>
            <fieldset class="control-fieldset">
              <legend>Filtro Simples</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="simplyFilter('max')">
                    Max
                  </button>
                  <button class="btn-operation" onclick="simplyFilter('min')">
                    Min
                  </button>
                  <button class="btn-operation" onclick="simplyFilter('mean')">
                    Mean
                  </button>
                </div>
              </div>
            </fieldset>
            <fieldset class="control-fieldset">
              <legend>Filtros de Suavização</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button
                    class="btn-operation"
                    onclick="simplyFilter('median')"
                  >
                    Mediana
                  </button>
                  <button
                    class="btn-operation"
                    onclick="simplyFilter('suaCon')"
                  >
                    Suavisação C.
                  </button>
                </div>
              </div>
            </fieldset>
            <fieldset class="control-fieldset">
              <legend>Filtro de Ordem</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <label for="valueInput">Valor:</label>
                  <input
                    type="range"
                    id="ordemRange"
                    min="1"
                    max="9"
                    value="5"
                  />
                  <input
                    type="number"
                    id="ordemValue"
                    min="1"
                    max="9"
                    value="5"
                  />
                </div>
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="applyOrdemFilter()">
                    Ordem
                  </button>
                </div>
              </div>
            </fieldset>
            <fieldset class="control-fieldset">
              <legend>Filtro Gaussiano</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <label for="valueInput">Valor (σ):</label>
                  <input
                    type="range"
                    id="glaussRange"
                    min="0"
                    max="3"
                    value="1"
                    step="0.1"
                  />
                  <input
                    type="number"
                    id="glaussValue"
                    min="0"
                    max="3"
                    value="1"
                    step="0.1"
                  />
                </div>
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="applyGaussianFilter()">
                    Gaussiano
                  </button>
                </div>
                <div class="control-group-inline">
                  <canvas
                    id="gaussianKernelCanvas"
                    width="200"
                    height="200"
                    style="
                      border: 1px solid #ccc;
                      border-radius: 4px;
                      margin: 10px 0;
                    "
                  ></canvas>
                </div>
              </div>
            </fieldset>
          </div>
        </section>

        <section id="sec7" class="content-section" data-active="false">
          <div class="controls">
            <fieldset class="control-fieldset">
              <legend>Primeira Ordem</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="prewitt()">
                    Prewitt
                  </button>
                  <button class="btn-operation" onclick="sobel()">Sobel</button>
                </div>
              </div>
            </fieldset>
            <fieldset class="control-fieldset">
              <legend>Segunda Ordem</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="laplaciano()">
                    Laplaciano
                  </button>
                </div>
              </div>
            </fieldset>
          </div>
        </section>

        <section id="sec8" class="content-section" data-active="false">
          <div class="controls">
            <fieldset class="control-fieldset">
              <legend>Definição de valores</legend>
              <div class="fieldset-content">
                <div class="control-group">
                  <label for="morphKernelSize">Grade:</label>
                  <select id="morphKernelSize">
                    <option value="3">3x3</option>
                    <option value="5">5x5</option>
                    <option value="7">7x7</option>
                    <option value="9">9x9</option>
                  </select>
                </div>
                <div class="control-group">
                  <label for="morphStructElement">Elemento Estruturante:</label>
                  <select id="morphStructElement">
                    <option value="horizontal">Linha Horizontal</option>
                    <option value="vertical">Linha Vertical</option>
                    <option value="cross">Cruz</option>
                  </select>
                </div>
              </div>
            </fieldset>

            <fieldset class="control-fieldset">
              <legend>Operações Morfológicas Básicas</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="dilate()">
                    Dilatação
                  </button>
                  <button class="btn-operation" onclick="erode()">
                    Erosão
                  </button>
                </div>
              </div>
            </fieldset>

            <fieldset class="control-fieldset">
              <legend>Operações Morfológicas Avançadas</legend>
              <div class="fieldset-content">
                <div class="control-group-inline">
                  <button class="btn-operation" onclick="opening()">
                    Abertura
                  </button>
                  <button class="btn-operation" onclick="closing()">
                    Fechamento
                  </button>
                  <button class="btn-operation" onclick="outline()">
                    Contorno
                  </button>
                </div>
              </div>
            </fieldset>
          </div>
        </section>

        <section id="sec9" class="content-section" data-active="false">
          <div class="color-info" id="colorInfo">
            <h3>Informações de Cor do Pixel Clicado</h3>
            <div class="color-values">
              <div class="color-value">
                <h4>RGB</h4>
                <p id="rgbValue">-</p>
              </div>
              <div class="color-value">
                <h4>CMYK</h4>
                <p id="cmykValue">-</p>
              </div>
              <div class="color-value">
                <h4>HSL</h4>
                <p id="hslValue">-</p>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </body>
</html>
